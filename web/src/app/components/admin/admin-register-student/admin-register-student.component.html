<div class="register-container">
  <div class="page-header">
    <h1>Registrar Nuevo Estudiante</h1>
    <p>Complete el formulario para dar de alta un estudiante</p>
  </div>

  @if (message()) {
    <div class="alert" 
         [class.alert-success]="message()!.type === 'success'" 
         [class.alert-error]="message()!.type === 'error'">
      {{ message()!.text }}
    </div>
  }

  <form (ngSubmit)="onSubmit()" class="register-form">
    <div class="form-grid">
      <!-- Información Personal -->
      <div class="form-section">
        <h3>Información Personal</h3>
        
        <div class="form-group">
          <label for="first_name">Nombre(s) *</label>
          <input
            type="text"
            id="first_name"
            [value]="student().first_name"
            (input)="updateField('first_name', $any($event.target).value)"
            required
          />
        </div>

        <div class="form-group">
          <label for="last_name">Apellidos *</label>
          <input
            type="text"
            id="last_name"
            [value]="student().last_name"
            (input)="updateField('last_name', $any($event.target).value)"
            required
          />
        </div>

        <div class="form-group">
          <label for="birth_date">Fecha de Nacimiento *</label>
          <input
            type="date"
            id="birth_date"
            [value]="student().birth_date"
            (input)="updateField('birth_date', $any($event.target).value)"
            required
          />
        </div>

        <div class="form-group">
          <label for="curp">CURP *</label>
          <input
            type="text"
            id="curp"
            [value]="student().curp"
            (input)="updateField('curp', $any($event.target).value)"
            placeholder="XXXX000000XXXXXX00"
            maxlength="18"
            required
          />
        </div>
      </div>

      <!-- Información Académica -->
      <div class="form-section">
        <h3>Información Académica</h3>

        <div class="form-group">
          <label for="matricula">Matrícula *</label>
          <input
            type="text"
            id="matricula"
            [value]="student().matricula"
            (input)="updateField('matricula', $any($event.target).value)"
            placeholder="2026-0001"
            required
          />
        </div>

        <div class="form-group">
          <label for="career">Carrera *</label>
          <select
            id="career"
            [value]="student().career_id"
            (change)="updateField('career_id', +$any($event.target).value)"
            required
          >
            @for (career of careers(); track career.id) {
              <option [value]="career.id">{{ career.name }}</option>
            }
          </select>
        </div>

        <div class="form-group">
          <label for="email">Correo Electrónico *</label>
          <input
            type="email"
            id="email"
            [value]="student().email"
            (input)="updateField('email', $any($event.target).value)"
            placeholder="estudiante@ejemplo.com"
            required
          />
        </div>

        <div class="form-group">
          <label for="password">Contraseña *</label>
          <input
            type="password"
            id="password"
            [value]="student().password"
            (input)="updateField('password', $any($event.target).value)"
            placeholder="••••••••"
            minlength="8"
            required
          />
        </div>
      </div>
    </div>

    <div class="form-actions">
      <button type="button" (click)="resetForm()" class="btn-secondary">
        Limpiar
      </button>
      <button type="submit" class="btn-primary" [disabled]="loading()">
        @if (loading()) {
          <span>Registrando...</span>
        } @else {
          <span>Registrar Estudiante</span>
        }
      </button>
    </div>
  </form>
</div>
